<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>server.build-task documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bond</span> <span class="project-version">1.0.7</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01_README.html"><div class="inner"><span>The Bond Nightly Release System</span></div></a></li><li class="depth-1 "><a href="02_supplementary_documents.html"><div class="inner"><span>Supplementary Documents</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crossover</span></div></div></li><li class="depth-2"><a href="crossover.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>server</span></div></div></li><li class="depth-2 branch"><a href="server.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-2 branch"><a href="server.build-log-handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build-log-handler</span></div></a></li><li class="depth-2 branch current"><a href="server.build-task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build-task</span></div></a></li><li class="depth-2 branch"><a href="server.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="server.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="server.cron.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cron</span></div></a></li><li class="depth-2 branch"><a href="server.crypto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crypto</span></div></a></li><li class="depth-2 branch"><a href="server.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch"><a href="server.local-settings.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-settings</span></div></a></li><li class="depth-2 branch"><a href="server.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="server.shell-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell-utils</span></div></a></li><li class="depth-2 branch"><a href="server.tasks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tasks</span></div></a></li><li class="depth-2"><a href="server.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="server.build-task.html#var-all-task-states-sorted-by-date"><div class="inner"><span>all-task-states-sorted-by-date</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-anything-changed.3F"><div class="inner"><span>anything-changed?</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-create-cron-tab"><div class="inner"><span>create-cron-tab</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-create-task-store"><div class="inner"><span>create-task-store</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-drop-current-task"><div class="inner"><span>drop-current-task</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-gen-build-task-sequence"><div class="inner"><span>gen-build-task-sequence</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-all-build-uuids"><div class="inner"><span>get-all-build-uuids</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-build-description"><div class="inner"><span>get-build-description</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-changelog"><div class="inner"><span>get-changelog</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-last-error"><div class="inner"><span>get-last-error</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-sw-version"><div class="inner"><span>get-sw-version</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-task-sequence"><div class="inner"><span>get-task-sequence</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-get-task-sequence-state"><div class="inner"><span>get-task-sequence-state</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-is-task-sequence-running.3F"><div class="inner"><span>is-task-sequence-running?</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-last-task-update"><div class="inner"><span>last-task-update</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-processing-error"><div class="inner"><span>processing-error</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-release-build-task-sequence"><div class="inner"><span>release-build-task-sequence</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-start-build-task-sequence"><div class="inner"><span>start-build-task-sequence</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-stop-build-task-sequence"><div class="inner"><span>stop-build-task-sequence</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-task-states-for-keys"><div class="inner"><span>task-states-for-keys</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-task-store"><div class="inner"><span>task-store</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-task-uuid-last-updated-store"><div class="inner"><span>task-uuid-last-updated-store</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-updated-task-states-running"><div class="inner"><span>updated-task-states-running</span></div></a></li><li class="depth-1"><a href="server.build-task.html#var-updated-task-states-since"><div class="inner"><span>updated-task-states-since</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">server.build-task</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-all-task-states-sorted-by-date"><h3>all-task-states-sorted-by-date</h3><div class="usage"><code>(all-task-states-sorted-by-date)</code></div><div class="doc"><pre class="plaintext">returns a sorted lazy sequence of build id's and state information

The output is sorted such that most recent build uuid's appear first.
Each task comes as a key value pair with the following keys:
:running, :changelog, :anything-changed :sw-version :task-uuid</pre></div></div><div class="public anchor" id="var-anything-changed.3F"><h3>anything-changed?</h3><div class="usage"><code>(anything-changed? task-uuid)</code></div><div class="doc"><pre class="plaintext">true if any new changes has been introduced in build task with given task-uuid
</pre></div></div><div class="public anchor" id="var-create-cron-tab"><h3>create-cron-tab</h3><div class="usage"><code>(create-cron-tab cron-build-descriptions)</code></div><div class="doc"><pre class="plaintext">creates  a  crontab  for  automatic  start of  all  builds  within  the  list
cron-build-descriptions</pre></div></div><div class="public anchor" id="var-create-task-store"><h3>create-task-store</h3><div class="usage"><code>(create-task-store)</code></div><div class="doc"><pre class="plaintext">creates and initializes from disk task-store atom
</pre></div></div><div class="public anchor" id="var-drop-current-task"><h3>drop-current-task</h3><div class="usage"><code>(drop-current-task task-uuid)</code></div><div class="doc"><pre class="plaintext">helper function which drops the current task from given uuid
this can be useful when a sequence step is executed manually
and therefore needs to remove from the processing list.</pre></div></div><div class="public anchor" id="var-gen-build-task-sequence"><h3>gen-build-task-sequence</h3><div class="usage"><code>(gen-build-task-sequence build-description-handler log-handler)</code></div><div class="doc"><pre class="plaintext">create a sequence of build operations

The  operations are  described  by a  so called  build  description which  is
created by a callback handler function provided as first argument. The second
argument  is a  logging handler  which  creates the  actual logging  callback
function. The logging handler is invoked with an additional argument which is
usually a log  file name. The logging call back  function is invoked whenever
the internal state of the build sequence changes.

All build  sequences aka  as tasks  are stored in  an internal  database, the
task-store as hash map  where the key is an unique  identifier (uuid) and the
value is hash map providing the  current build state which hold currently the
the  build description  and  a list  of not  yet  processed operations  (task
sequence).

The function returns this uuid for further usage.</pre></div></div><div class="public anchor" id="var-get-all-build-uuids"><h3>get-all-build-uuids</h3><div class="usage"><code>(get-all-build-uuids)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-get-build-description"><h3>get-build-description</h3><div class="usage"><code>(get-build-description task-uuid)</code></div><div class="doc"><pre class="plaintext">retrieves the build  description for a given task-uuid. Refer  to the funtion
'gen-build-task-sequence' for further information.</pre></div></div><div class="public anchor" id="var-get-changelog"><h3>get-changelog</h3><div class="usage"><code>(get-changelog task-uuid)</code></div><div class="doc"><pre class="plaintext">retrieve changelog for given task-uuid
</pre></div></div><div class="public anchor" id="var-get-last-error"><h3>get-last-error</h3><div class="usage"><code>(get-last-error task-uuid)</code></div><div class="doc"><pre class="plaintext">retrieve last error from given task-uuid
</pre></div></div><div class="public anchor" id="var-get-sw-version"><h3>get-sw-version</h3><div class="usage"><code>(get-sw-version task-uuid)</code></div><div class="doc"><pre class="plaintext">retrieve the software version if available from given task-uuid
</pre></div></div><div class="public anchor" id="var-get-task-sequence"><h3>get-task-sequence</h3><div class="usage"><code>(get-task-sequence task-uuid)</code></div><div class="doc"><pre class="plaintext">retrieves  the  task  sequence  which  is   the  list  of  open  or  not  yet
successfully executed  operations from the  task-store. Refer to  the function
'gen-build-task-sequence' for further information.</pre></div></div><div class="public anchor" id="var-get-task-sequence-state"><h3>get-task-sequence-state</h3><div class="usage"><code>(get-task-sequence-state task-uuid)</code></div><div class="doc"><pre class="plaintext">retrieve  the  current  processing  state of  the  background  build  process
associated with the provided task-uuid.</pre></div></div><div class="public anchor" id="var-is-task-sequence-running.3F"><h3>is-task-sequence-running?</h3><div class="usage"><code>(is-task-sequence-running? task-uuid)</code></div><div class="doc"><pre class="plaintext">returns true when the background  build process associated with the task-uuid
is still running.</pre></div></div><div class="public anchor" id="var-last-task-update"><h3>last-task-update</h3><div class="usage"><code>(last-task-update)</code></div><div class="doc"><pre class="plaintext">returns the time stamp about the most recent update of the task list
</pre></div></div><div class="public anchor" id="var-processing-error"><h3>processing-error</h3><div class="usage"><code>(processing-error task-uuid)</code></div><div class="doc"><pre class="plaintext">returns the processing (agent) error string for the given task-uuid
</pre></div></div><div class="public anchor" id="var-release-build-task-sequence"><h3>release-build-task-sequence</h3><div class="usage"><code>(release-build-task-sequence task-uuid)</code></div><div class="doc"><pre class="plaintext">release callback  handlers which carry  out event notifications of  the build
task sequence referred by the provided task-uuid.</pre></div></div><div class="public anchor" id="var-start-build-task-sequence"><h3>start-build-task-sequence</h3><div class="usage"><code>(start-build-task-sequence task-uuid)</code></div><div class="doc"><pre class="plaintext">start or  continue the processing  of the  build task sequence  as background
process referred by the provided task-uuid.</pre></div></div><div class="public anchor" id="var-stop-build-task-sequence"><h3>stop-build-task-sequence</h3><div class="usage"><code>(stop-build-task-sequence task-uuid)</code></div><div class="doc"><pre class="plaintext">stop  the processing  of the  build task  sequence referred  by the  provided
task-uuid.</pre></div></div><div class="public anchor" id="var-task-states-for-keys"><h3>task-states-for-keys</h3><div class="usage"><code>(task-states-for-keys task-uuid-set)</code></div><div class="doc"><pre class="plaintext">returns a sorted lazy sequence of build id's of the given set of task-uuid's

The function returns the output of the same format as
all-task-states-sorted-by-date but gives only elements which have been
updated since given 'task-uuid'</pre></div></div><div class="public anchor" id="var-task-store"><h3>task-store</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-task-uuid-last-updated-store"><h3>task-uuid-last-updated-store</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-updated-task-states-running"><h3>updated-task-states-running</h3><div class="usage"><code>(updated-task-states-running)</code></div><div class="doc"><pre class="plaintext">returns a sorted lazy sequence of updated build id's which are still running

The function returns the output of the same format as
all-task-states-sorted-by-date but gives only elements which have been
updated since given 'task-uuid'</pre></div></div><div class="public anchor" id="var-updated-task-states-since"><h3>updated-task-states-since</h3><div class="usage"><code>(updated-task-states-since date-string)</code></div><div class="doc"><pre class="plaintext">returns a sorted lazy sequence of updated build id's since given date-string

The    function   returns    the    output   of    the    same   format    as
all-task-states-sorted-by-date  but  gives  only  elements  which  have  been
updated since given date string</pre></div></div></div></body></html>