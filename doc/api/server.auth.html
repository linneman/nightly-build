<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>server.auth documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bond</span> <span class="project-version">1.0.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01_README.html"><div class="inner"><span>The Bond Nightly Release System</span></div></a></li><li class="depth-1 "><a href="02_supplementary_documents.html"><div class="inner"><span>Supplementary Documents</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crossover</span></div></div></li><li class="depth-2"><a href="crossover.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>server</span></div></div></li><li class="depth-2 branch current"><a href="server.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-2 branch"><a href="server.build-log-handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build-log-handler</span></div></a></li><li class="depth-2 branch"><a href="server.build-task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build-task</span></div></a></li><li class="depth-2 branch"><a href="server.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="server.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="server.cron.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cron</span></div></a></li><li class="depth-2 branch"><a href="server.crypto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crypto</span></div></a></li><li class="depth-2 branch"><a href="server.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch"><a href="server.local-settings.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-settings</span></div></a></li><li class="depth-2 branch"><a href="server.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="server.shell-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell-utils</span></div></a></li><li class="depth-2 branch"><a href="server.tasks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tasks</span></div></a></li><li class="depth-2"><a href="server.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="server.auth.html#var-_ring-args"><div class="inner"><span>_ring-args</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-_user-list"><div class="inner"><span>_user-list</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-add-user"><div class="inner"><span>add-user</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-add-user-to-db"><div class="inner"><span>add-user-to-db</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-all-roles"><div class="inner"><span>all-roles</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-check-user-password"><div class="inner"><span>check-user-password</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-confirm"><div class="inner"><span>confirm</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-create-admin-user-if-not-existing"><div class="inner"><span>create-admin-user-if-not-existing</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-delete-user-in-db"><div class="inner"><span>delete-user-in-db</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-email-regex"><div class="inner"><span>email-regex</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-forgot-password"><div class="inner"><span>forgot-password</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-get-user-info"><div class="inner"><span>get-user-info</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-get-user-list"><div class="inner"><span>get-user-list</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-keep-users-in-db"><div class="inner"><span>keep-users-in-db</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-login"><div class="inner"><span>login</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-logout"><div class="inner"><span>logout</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-send-confirmation-email"><div class="inner"><span>send-confirmation-email</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-set-password"><div class="inner"><span>set-password</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-update-all-users"><div class="inner"><span>update-all-users</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-update-confirmation-link-for-user"><div class="inner"><span>update-confirmation-link-for-user</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-update-user"><div class="inner"><span>update-user</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-update-user-in-db"><div class="inner"><span>update-user-in-db</span></div></a></li><li class="depth-1"><a href="server.auth.html#var-wrap-authentication"><div class="inner"><span>wrap-authentication</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">server.auth</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-_ring-args"><h3>_ring-args</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-_user-list"><h3>_user-list</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-add-user"><h3>add-user</h3><div class="usage"><code>(add-user ring-args)</code></div><div class="doc"><pre class="plaintext">add new user
</pre></div></div><div class="public anchor" id="var-add-user-to-db"><h3>add-user-to-db</h3><div class="usage"><code>(add-user-to-db &amp; {:keys [name email password role send-confirm-email], :or {send-confirm-email true}})</code></div><div class="doc"><pre class="plaintext">add a new user with keyword args :name, :email, :password and :role

:role must be :view, :control or :admin</pre></div></div><div class="public anchor" id="var-all-roles"><h3>all-roles</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-check-user-password"><h3>check-user-password</h3><div class="usage"><code>(check-user-password login-id pass-entered)</code></div><div class="doc"><pre class="plaintext">check the user password against the login and
return the user data map when existing.</pre></div></div><div class="public anchor" id="var-confirm"><h3>confirm</h3><div class="usage"><code>(confirm ring-args)</code></div><div class="doc"><pre class="plaintext">invoked handler when user clicked email confirmation link
</pre></div></div><div class="public anchor" id="var-create-admin-user-if-not-existing"><h3>create-admin-user-if-not-existing</h3><div class="usage"><code>(create-admin-user-if-not-existing)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-delete-user-in-db"><h3>delete-user-in-db</h3><div class="usage"><code>(delete-user-in-db name)</code></div><div class="doc"><pre class="plaintext">remove user with given name from user db
</pre></div></div><div class="public anchor" id="var-email-regex"><h3>email-regex</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-forgot-password"><h3>forgot-password</h3><div class="usage"><code>(forgot-password {:keys [params session cookies], :as ring-args})</code></div><div class="doc"><pre class="plaintext">utility function for requesting a new activation link
</pre></div></div><div class="public anchor" id="var-get-user-info"><h3>get-user-info</h3><div class="usage"><code>(get-user-info ring-args)</code></div><div class="doc"><pre class="plaintext">rerieves login name, email address and access role for logged in user
</pre></div></div><div class="public anchor" id="var-get-user-list"><h3>get-user-list</h3><div class="usage"><code>(get-user-list)</code></div><div class="doc"><pre class="plaintext">retrieve list of all users
</pre></div></div><div class="public anchor" id="var-keep-users-in-db"><h3>keep-users-in-db</h3><div class="usage"><code>(keep-users-in-db names)</code></div><div class="doc"><pre class="plaintext">keeps only users with given names in user db
</pre></div></div><div class="public anchor" id="var-login"><h3>login</h3><div class="usage"><code>(login {:keys [params session cookies], :as ring-args})</code></div><div class="doc"><pre class="plaintext">utility function for processing POST requests comming
from login forms currently based on user name and password.</pre></div></div><div class="public anchor" id="var-logout"><h3>logout</h3><div class="usage"><code>(logout ring-args)</code></div><div class="doc"><pre class="plaintext">middleware for logout out

This will removes the session cookie</pre></div></div><div class="public anchor" id="var-send-confirmation-email"><h3>send-confirmation-email</h3><div class="usage"><code>(send-confirmation-email user)</code></div><div class="doc"><pre class="plaintext"></pre></div></div><div class="public anchor" id="var-set-password"><h3>set-password</h3><div class="usage"><code>(set-password ring-args)</code></div><div class="doc"><pre class="plaintext">set new password
</pre></div></div><div class="public anchor" id="var-update-all-users"><h3>update-all-users</h3><div class="usage"><code>(update-all-users ring-args)</code></div><div class="doc"><pre class="plaintext">updates user db based on list with all users.

creates new user when not existing, otherwise updates existing one.</pre></div></div><div class="public anchor" id="var-update-confirmation-link-for-user"><h3>update-confirmation-link-for-user</h3><div class="usage"><code>(update-confirmation-link-for-user name)</code></div><div class="doc"><pre class="plaintext">renews confirmation key in database for given user
</pre></div></div><div class="public anchor" id="var-update-user"><h3>update-user</h3><div class="usage"><code>(update-user ring-args)</code></div><div class="doc"><pre class="plaintext">update role and/or email of existing user
</pre></div></div><div class="public anchor" id="var-update-user-in-db"><h3>update-user-in-db</h3><div class="usage"><code>(update-user-in-db name &amp; {:keys [email password role confirmed]})</code></div><div class="doc"><pre class="plaintext">update user db with given keys
</pre></div></div><div class="public anchor" id="var-wrap-authentication"><h3>wrap-authentication</h3><div class="usage"><code>(wrap-authentication handler access-method-hash)</code></div><div class="doc"><pre class="plaintext">middleware for user authentication.

The first argument is  the ring handler followed by a hash  map where the keys
denote the http method and the values  declare a set of allowed methods. If no
access method  is specified  get operations  are allowed  by default  and post
operation require administration or control priviledges.</pre></div></div></div></body></html>