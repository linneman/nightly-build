<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>server.build-log-handler documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Bond</span> <span class="project-version">1.0.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01_README.html"><div class="inner"><span>The Bond Nightly Release System</span></div></a></li><li class="depth-1 "><a href="02_supplementary_documents.html"><div class="inner"><span>Supplementary Documents</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crossover</span></div></div></li><li class="depth-2"><a href="crossover.macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>macros</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>server</span></div></div></li><li class="depth-2 branch"><a href="server.auth.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>auth</span></div></a></li><li class="depth-2 branch current"><a href="server.build-log-handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build-log-handler</span></div></a></li><li class="depth-2 branch"><a href="server.build-task.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>build-task</span></div></a></li><li class="depth-2 branch"><a href="server.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="server.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="server.cron.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cron</span></div></a></li><li class="depth-2 branch"><a href="server.crypto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crypto</span></div></a></li><li class="depth-2 branch"><a href="server.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 branch"><a href="server.local-settings.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>local-settings</span></div></a></li><li class="depth-2 branch"><a href="server.session.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>session</span></div></a></li><li class="depth-2 branch"><a href="server.shell-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell-utils</span></div></a></li><li class="depth-2 branch"><a href="server.tasks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tasks</span></div></a></li><li class="depth-2"><a href="server.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="server.build-log-handler.html#var-build-log-handler"><div class="inner"><span>build-log-handler</span></div></a></li><li class="depth-1"><a href="server.build-log-handler.html#var-get-last-log"><div class="inner"><span>get-last-log</span></div></a></li><li class="depth-1"><a href="server.build-log-handler.html#var-get-processed-log"><div class="inner"><span>get-processed-log</span></div></a></li><li class="depth-1"><a href="server.build-log-handler.html#var-log-atom-store"><div class="inner"><span>log-atom-store</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">server.build-log-handler</h1><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-build-log-handler"><h3>build-log-handler</h3><div class="usage"><code>(build-log-handler build-id filename &amp; {:keys [cache-time-ms], :or {cache-time-ms 1500}})</code></div><div class="doc"><pre class="plaintext">creates  a more  sophisticated  log  handler which  writes  out  log data  to
standard out  and to  the specified file.  Futhermore the data  is kept  to an
updated cache for the specified numer of milliseconds where one seconds is the
default. The  cache is transfered  to the  processed entries var  whenever the
invocation period between to logger functions is bigger than that.</pre></div></div><div class="public anchor" id="var-get-last-log"><h3>get-last-log</h3><div class="usage"><code>(get-last-log build-id)</code></div><div class="doc"><pre class="plaintext">get hashmap of the last log messages of the past 10 seconds
and the associated timestamp when the message has been generated</pre></div></div><div class="public anchor" id="var-get-processed-log"><h3>get-processed-log</h3><div class="usage"><code>(get-processed-log build-id)</code></div><div class="doc"><pre class="plaintext">get the processed log messages which are older than 10 seconds

Retreive all processed log messages from cache when present.
Otherwise read these messages from the associated log file.</pre></div></div><div class="public anchor" id="var-log-atom-store"><h3>log-atom-store</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div></div></div></body></html>